<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ByteDohm.de - PC Konfigurator & Fertig-PCs{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Meta Tags -->
    <meta name="description" content="ByteDohm.de - Professionelle PC-Konfiguration und Fertig-PCs. Moderne Konfigurator-Tool mit Kompatibilit√§tspr√ºfung f√ºr CPU, Mainboard, RAM, GPU und mehr.">
    <meta name="keywords" content="PC Konfigurator, Gaming PC, Workstation, Computer, Hardware, Deutschland">
    <meta name="author" content="ByteDohm.de">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíª</text></svg>">
</head>
<body class="d-flex flex-column min-vh-100">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">
                <i class="fas fa-desktop"></i> ByteDohm.de
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('index') }}">
                            <i class="fas fa-home"></i> Startseite
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('configurator') }}">
                            <i class="fas fa-cogs"></i> PC Konfigurator
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('prebuild') }}">
                            <i class="fas fa-computer"></i> Fertig-PCs
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('cart') }}">
                            <i class="fas fa-shopping-cart"></i> Warenkorb
                            <span id="cart-badge" class="badge bg-primary ms-1" style="display: none;">0</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">
                            <i class="fas fa-envelope"></i> Kontakt
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('customer_auth.login') }}">
                            <i class="fas fa-user me-1"></i>Kundenkonto
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-fill">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>ByteDohm.de</h5>
                    <p class="mb-0">Ihr professioneller Partner f√ºr PC-Konfiguration und Fertig-PCs.</p>
                </div>
                <div class="col-md-4">
                    <h6>Rechtliches</h6>
                    <ul class="list-unstyled">
                        <li><a href="{{ url_for('widerrufsrecht') }}" class="text-light-emphasis text-decoration-none">Widerrufsrecht</a></li>
                        <li><a href="{{ url_for('agb') }}" class="text-light-emphasis text-decoration-none">AGB</a></li>
                        <li><a href="{{ url_for('datenschutz') }}" class="text-light-emphasis text-decoration-none">Datenschutzerkl√§rung</a></li>
                        <li><a href="{{ url_for('zahlungsmethoden') }}" class="text-light-emphasis text-decoration-none">Zahlungsmethoden</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h6>Kontakt</h6>
                    <p class="mb-1">E-Mail: info@bytedohm.de</p>
                    <p class="mb-1">Telefon: +49 (0) 123 456789</p>
                    <div class="mt-3">
                        <a href="/sendungsverfolgung" class="text-light-emphasis text-decoration-none">
                            <i class="fas fa-truck me-1"></i>Sendungsverfolgung
                        </a>
                    </div>
                </div>
            </div>
            <hr class="my-3">
            <div class="row">
                <div class="col-md-6">
                    <small>&copy; 2025 ByteDohm.de - Alle Rechte vorbehalten</small>
                </div>
                <div class="col-md-6 text-md-end">
                    <small>Powered by ByteDohm Technology</small>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Toast Container -->
    <div id="toast-container" class="position-fixed top-0 end-0 p-3" style="z-index: 9999;"></div>
    
    <!-- Modern Confirmation Modal -->
    <div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <div class="d-flex align-items-center w-100">
                        <div id="confirm-icon" class="me-3 text-warning">
                            <i class="fas fa-exclamation-triangle fa-2x"></i>
                        </div>
                        <h5 class="modal-title mb-0" id="confirmModalTitle">Best√§tigung erforderlich</h5>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body pt-2">
                    <p id="confirmModalMessage" class="mb-0 text-muted"></p>
                </div>
                <div class="modal-footer border-0 pt-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="button" id="confirmModalAction" class="btn btn-primary">Best√§tigen</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modern Input Modal -->
    <div class="modal fade" id="inputModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <div class="d-flex align-items-center w-100">
                        <div id="input-icon" class="me-3 text-primary">
                            <i class="fas fa-edit fa-2x"></i>
                        </div>
                        <h5 class="modal-title mb-0" id="inputModalTitle">Eingabe erforderlich</h5>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body pt-2">
                    <p id="inputModalMessage" class="mb-3 text-muted"></p>
                    <div class="form-floating">
                        <input type="text" class="form-control" id="inputModalInput" placeholder="">
                        <label for="inputModalInput" id="inputModalLabel">Name eingeben</label>
                    </div>
                    <div class="form-text" id="inputModalHelp"></div>
                </div>
                <div class="modal-footer border-0 pt-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="button" id="inputModalAction" class="btn btn-primary">Speichern</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Modern UI Helper Script -->
    <script>
    // Modern Toast Notification System
    class ToastManager {
        static show(message, type = 'info', duration = 4000) {
            const toastContainer = document.getElementById('toast-container');
            const toastId = 'toast-' + Date.now();
            
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle',
                info: 'fas fa-info-circle'
            };
            
            const colors = {
                success: 'success',
                error: 'danger',
                warning: 'warning',
                info: 'primary'
            };
            
            const toast = document.createElement('div');
            toast.id = toastId;
            toast.className = `toast align-items-center text-bg-${colors[type]} border-0 mb-2`;
            toast.setAttribute('role', 'alert');
            
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body d-flex align-items-center">
                        <i class="${icons[type]} me-2"></i>
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            
            const bsToast = new bootstrap.Toast(toast, { delay: duration });
            bsToast.show();
            
            // Remove from DOM after hiding
            toast.addEventListener('hidden.bs.toast', () => {
                toast.remove();
            });
            
            return bsToast;
        }
    }
    
    // Modern Confirmation Dialog
    class ConfirmDialog {
        static show(message, title = 'Best√§tigung erforderlich', type = 'warning') {
            return new Promise((resolve) => {
                const modal = document.getElementById('confirmModal');
                const titleEl = document.getElementById('confirmModalTitle');
                const messageEl = document.getElementById('confirmModalMessage');
                const iconEl = document.getElementById('confirm-icon');
                const actionBtn = document.getElementById('confirmModalAction');
                
                const icons = {
                    warning: { icon: 'fas fa-exclamation-triangle', class: 'text-warning' },
                    danger: { icon: 'fas fa-exclamation-circle', class: 'text-danger' },
                    info: { icon: 'fas fa-question-circle', class: 'text-info' }
                };
                
                titleEl.textContent = title;
                messageEl.textContent = message;
                iconEl.innerHTML = `<i class="${icons[type].icon} fa-2x"></i>`;
                iconEl.className = `me-3 ${icons[type].class}`;
                
                if (type === 'danger') {
                    actionBtn.className = 'btn btn-danger';
                    actionBtn.textContent = 'L√∂schen';
                } else {
                    actionBtn.className = 'btn btn-primary';
                    actionBtn.textContent = 'Best√§tigen';
                }
                
                const bsModal = new bootstrap.Modal(modal);
                bsModal.show();
                
                const handleAction = () => {
                    bsModal.hide();
                    resolve(true);
                    actionBtn.removeEventListener('click', handleAction);
                };
                
                const handleCancel = () => {
                    resolve(false);
                };
                
                actionBtn.addEventListener('click', handleAction);
                modal.addEventListener('hidden.bs.modal', handleCancel, { once: true });
            });
        }
    }
    
    // Modern Input Dialog
    class InputDialog {
        static show(message, defaultValue = '', title = 'Eingabe erforderlich', placeholder = '', helpText = '') {
            return new Promise((resolve) => {
                const modal = document.getElementById('inputModal');
                const titleEl = document.getElementById('inputModalTitle');
                const messageEl = document.getElementById('inputModalMessage');
                const inputEl = document.getElementById('inputModalInput');
                const labelEl = document.getElementById('inputModalLabel');
                const helpEl = document.getElementById('inputModalHelp');
                const actionBtn = document.getElementById('inputModalAction');
                
                titleEl.textContent = title;
                messageEl.textContent = message;
                inputEl.value = defaultValue;
                inputEl.placeholder = placeholder;
                labelEl.textContent = placeholder;
                helpEl.textContent = helpText;
                
                const bsModal = new bootstrap.Modal(modal);
                bsModal.show();
                
                // Focus input after modal is shown
                modal.addEventListener('shown.bs.modal', () => {
                    inputEl.focus();
                    inputEl.select();
                }, { once: true });
                
                const handleAction = () => {
                    const value = inputEl.value.trim();
                    if (value) {
                        bsModal.hide();
                        resolve(value);
                    } else {
                        inputEl.classList.add('is-invalid');
                        ToastManager.show('Bitte geben Sie einen g√ºltigen Wert ein.', 'error');
                    }
                    actionBtn.removeEventListener('click', handleAction);
                };
                
                const handleCancel = () => {
                    resolve(null);
                };
                
                const handleEnter = (e) => {
                    if (e.key === 'Enter') {
                        handleAction();
                    }
                };
                
                // Remove invalid class on input
                inputEl.addEventListener('input', () => {
                    inputEl.classList.remove('is-invalid');
                });
                
                actionBtn.addEventListener('click', handleAction);
                inputEl.addEventListener('keydown', handleEnter);
                modal.addEventListener('hidden.bs.modal', handleCancel, { once: true });
            });
        }
    }
    
    // Make globally available
    window.Toast = ToastManager;
    window.Confirm = ConfirmDialog;
    window.Input = InputDialog;
    </script>
    
    <!-- Cart Badge Update Script -->
    <script>
    function updateCartBadge() {
        const cartItems = JSON.parse(localStorage.getItem('cart_items') || '[]');
        const badge = document.getElementById('cart-badge');
        
        if (cartItems.length > 0) {
            badge.textContent = cartItems.length;
            badge.style.display = 'inline';
        } else {
            badge.style.display = 'none';
        }
    }
    
    // Update cart badge when page loads
    document.addEventListener('DOMContentLoaded', updateCartBadge);
    
    // Update cart badge when localStorage changes (cross-tab)
    window.addEventListener('storage', function(e) {
        if (e.key === 'cart_items') {
            updateCartBadge();
        }
    });
    </script>
    
    <!-- Custom JS -->
    {% block scripts %}{% endblock %}
</body>
</html>
